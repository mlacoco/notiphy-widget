<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification Widget</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

        body {
            background-color: #051722;
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            line-height: normal;
            color: #333;

        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 1rem;
            background-color: rgba(255, 255, 255, .7);
            border-radius: 5px;
        }

        .logo {

            max-width: 1000px;
            margin: 0 auto;
            font-family: "Pacifico", cursive;
            color: rgb(133, 133, 133);
            padding: 0 0 .5rem 0;
        }

        .logo span {
            position: relative;
            font-weight: 300;
            font-size: 3rem;
            z-index: 1001;
        }

        .logo .material-symbols-outlined {
            position: absolute;
            color: #FFF;
            text-shadow: 0 0 9px #ff00d9;
            right: -1rem;
            top: 1.2rem;
            font-size: 1.6rem;
            z-index: 1000;
            transform: rotate(24deg);
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 0 0 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, .1);
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 0 0 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, .1);
        }

        h5,
        h6 {
            border-bottom: none;
        }

        pre {
            background-color: #eee;
            border: 1px solid #999;
            border-radius: 5px;
            display: block;
            font-size: 13px;
            line-height: 18px;
            margin: 0 0 18px;
            padding: 10px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .mono {
            font-family: monospace;
        }

        .inline-pre {
            display: inline-block;
            font-family: monospace;
            background-color: #eee;
            border: 1px solid #999;
            border-radius: 5px;
            font-size: .8rem;
            line-height: normal;
            padding: .2rem .6rem;
            margin: .2rem;
            white-space: pre-wrap;
        }

        .post {
            color: rgba(0, 0, 80, 1);
            background-color: rgba(0, 0, 80, 0.10);
            font-weight: bolder;
            padding: .2rem .6rem;
        }

        .callout {
            font-size: .9rem;
            background: linear-gradient(160deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.05) 88%);
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.054);
            padding: .37rem 1rem .37rem .5rem;
            margin: 1rem 2rem 1.5rem;
            border-left: 6px solid rgba(0, 0, 0, 0.5);
            font-family: var(--notiphy-font-family);
            font-weight: 400;
            font-style: normal;

        }

        .callout-warning {
            border-left: 6px solid #ff9800;
        }

        .callout-success {
            border-left: 6px solid #4caf50;
        }

        .callout-error {
            border-left: 6px solid #f44336;
        }

        .callout-info {
            border-left: 6px solid #2196f3;
        }
        .callout-primary {
            border-left: 6px solid #080275;
        }
        .callout-blocker {
            border: 1px solid #af0000;
            border-left-width: 6px;
            font-weight:bold;
            display:flex;
            align-items:center;

        }
        li.callout {
            font-family: monospace;
            font-size: .8em;
            margin: .25rem;
            width: 288px;
            list-style-type: none;
        }

        .callout ul>li {
            list-style-type: none;
        }

        li>ul {
            margin: 1rem 0;
        }

        .callout:hover {
            opacity: 1;
            filter: unset;
        }

        .callout-blocker .material-symbols-outlined {
            line-height: 0;
            /* font-size: 1rem; */
            color:#af0000;
        }

        .tryitout {
            display:flex;
            justify-content: center;flex-wrap:wrap;
        }

        .tryit-btn {
            position:relative;
            box-sizing: content-box;
            background-color: rgba(8, 5, 58, 1);
            color: #FFF !important;
            border: 3px solid #FFF;
            border-radius: 9px;
            padding: 0.5rem 1rem;
            box-shadow:
                2.8px 2.8px 2.2px rgba(0, 0, 0, 0.02),
                6.7px 6.7px 5.3px rgba(0, 0, 0, 0.028),
                12.5px 12.5px 10px rgba(0, 0, 0, 0.035),
                22.3px 22.3px 17.9px rgba(0, 0, 0, 0.042),
                41.8px 41.8px 33.4px rgba(0, 0, 0, 0.05),
                100px 100px 80px rgba(0, 0, 0, 0.07);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all .15s ease-in-out;
            margin: .5rem;
            width:160px;
            display:flex;
            align-items: center;
            justify-content: center;
            text-wrap: nowrap;
        }

        .tryit-btn:hover {
            background-color: rgba(8, 5, 58, .75);
            color: #FFF;
            border: 3px solid #FFF;
            text-shadow: 0 0 9px #ff00d9;
        }
        .tryit-btn:active {
            background-color: rgba(8, 5, 58, 1);
            transform: scale(.98);
        }
        .tryit-btn i {
            position:absolute;
            opacity: .6;
            left:.6rem;
        }
        .link-btn {
            cursor:pointer;
            text-decoration: underline;
        }
        .notiphy-container {
            position:relative;
            float:right;
        }
    </style>
    <script src="dist/notiphy-widget.v1.1.umd.js"></script>
    <link rel="stylesheet" href="/dist/notiphy.min.css">
    <link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><style>@media (prefers-color-scheme: light){ :root{ filter: none;}}@media (prefers-color-scheme: dark){ :root{ filter: invert(100%);}}</style><path d='M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6'/></svg>">
</head>

<body>
    <div class="logo">
        <span>Notiphy.me<i class="material-symbols-outlined">notifications</i></span>
    </div>
    
    <div class="container">
        <h1>The Notiphy widget <span class="notiphy-container" ></span></h1>
        <p>A really easy way to add toasts, alerts, and an inbox to store them all in to your app or website.</p>

        <div class="callout">
            <h4>Features</h4>
            <ul>
                <li>A single Javascript file in your HTML.</li>
                <li>Assign the widget to a specific user, or group of users.</li>
                <li>Specify if, where on the screen, and for how long toast notifications appear.</li>
                <li>Configure audio alerts and audible reminders for urgent notifications (try silent reminders!).</li>
                <li>Notifications can be marked read, or dismissed to remove from the Inbox.</li>
                <li>User activity is synchronised accross widgets initialized for the same user/group.</li>
            </ul>
        </div>

        <h4>Live demo, right now.</h4>
        <p>
            There's a live widget in action at the bottom-right. 
            You can interact with it, and see how it works. 
            You can also try it out yourself, below.
        </p>
        
        <div class="tryitout">
            <!-- Try it out button -->
            <button id="tryItOutButton" class="tryit-btn">Try it now <i class="material-symbols-outlined">notifications</i></button>
            <button id="tryBlockerButton" class="tryit-btn">Try a blocker <i class="material-symbols-outlined">crisis_alert</i></button>
        </div>
        
        <h4>Embed the widget</h4>
        <p>Include the widget and CSS from our CDN in your document's <span class="inline-pre">&lt;head></span> section.</p>
        <pre>

        &lt;head>
            ...
            &lt;script src="https://cdn.notiphy.me/notiphy-widget.v1.1.umd.js">&lt;/script>
            &lt;link rel="stylesheet" href="https://cdn.notiphy.me/notiphy.min.css">
            ...
        &lt;/head>
        </pre>
        
        <p>Initialize the widget before your closing <span class="inline-pre">&lt;/body></span> tag. The example below shows the minimal config, loading default settings.</p>
        <pre>

        &lt;body>
            ...
            page content
            ...
            &lt;script>
            const notiphyConfig = {
                    notiphyId: 'your-notiphy-id',
                    widgetKey: 'widget-api-key',
                    }

            document.addEventListener('DOMContentLoaded', function() {
                new NotiphyWidget(notiphyConfig);
            });
            &lt;/script>
        &lt;/body>
        </pre>
        <div class="callout">
            <h4>Config parameters</h4>
            <ol class="mono">
                <li>subscriberId .... [Required] The subscriber ID for the notification service.</li>
                <li>widgetKey ....... [Required] The widget API key for the notification service.</li>
                <li>locationId ...... The user/location ID for the Widget (default: 'default').</li>
                <li>widgetTitle ..... Custom title to be displayed in the Inbox.</li>
                <li>audioAlert ...... true/false. Sound on/off (off by default)</li>
                <li>audioReminder ... true/false. Audible reminder of unread notifications on/off (off by
                    default).</li>
                <li>reminderInterval. Interval in seconds to play the reminder (default: 180/3minutes, no minimum).</li>
                <li>toastAlert ...... Show toast notifications (off by default).</li>
                <li>toastPosition ... The position of the toast notification (default: "bottom-right").</li>
                <li>toastDuration ... The duration in seconds to display the toast notification (default: 4s).</li>
                <li>width ........... The width of the Inbox (default: "300px", 'vh' also supported).</li>
                <li>height .......... The height of the Inbox (default: "400px", 'vh' also supported).</li>
                <li>showInboxOnLoad.. Whether to show the Inbox by default (default: false).</li>
                <li>refreshInterval.. Seconds until auto-refresh Inbox if provided. (off by default, min. 300).</li>
                <li>compact.......... compact mode, relatively positioned (default: false).</li>
                <li>targetElement.... Required if compact: true. Relatively positioned element to place the widget.</li>
            </ol>
        </div>
        
        <p>
            There are a few ways that notifications can be customized when they are sent.
        </p>
        <ul>
            <li>
                <span class="inline-pre">"alertLevel"</span> <br>
                Affects the appearance of the notification, and can be one of the
                following:
                <ul>
                    <li class="callout">default ("" or not present)</li>
                    <li class="callout callout-primary"><strong>"primary"</strong></li>
                    <li class="callout callout-info"><strong>"info"</strong></li>
                    <li class="callout callout-success"><strong>"success"</strong></li>
                    <li class="callout callout-warning"><strong>"warning"</strong></li>
                    <li class="callout callout-error"><strong>"error"</strong></li>
                    <li class="callout callout-blocker"><i class="material-symbols-outlined">crisis_alert</i><strong>"blocker"</strong></li>
                    <li style="list-style-type:none;font-size:.8rem;opacity: .8;margin-left:1rem;"><span class="inline-pre">"alertLevel":"blocker"</span>forces a pop-up/modal to open that prevents the User
                from continuing until the notification is acknowledged.</li>
                </ul>
            </li>

            <li><span class="inline-pre">"actionUrl"</span> 
                If this property is specified, the body of the notification is a clickable link for the recipient.
                With the exception of mouse cursor appearance on mouseover, the notification appearance is
                not altered.
            </li>
                <li>
                    <span class="inline-pre">"linkButton"</span> 
                    If linkButton is true, the actionUrl is presented as a button in the notification. 
                    Otherwise, the body of the notification behaves as the link.
                </li>
                <li>
                    <span class="inline-pre">"linkButtonLabel"</span> 
                    Specifies a label for the button.  If not specified, the label is "Click here"
                </li>
                
        </ul>
    </div>

    <script>
        const notiphyConfig = {
            subscriberId: 'notiphy',
            widgetKey: 'notiphy_LzPaJ43t_C8vn4iX1X3EvecxFxHcvdAYE',
            locationId: 'notiphy_demo',        // Optional
            widgetTitle: 'Notification Feed',  // Optional
            height: '65vh',                    // Optional
            audioAlert: true,                  // Optional
            audioReminder: false,               // Optional
            reminderInterval: 30,              // Optional
            toastAlert: true,                  // Optional
            toastPosition: 'top-center',       // Optional
            toastDuration: 3.5,                  // Optional
            showInboxOnLoad: false,            // Optional
            refreshInterval: null,             // Optional
            compact: false,                     // Optional
            targetElement: '.notiphy-container'// Optional
        }

        document.addEventListener('DOMContentLoaded', function () {
            new NotiphyWidget(notiphyConfig);
        });

        document.getElementById('tryItOutButton').addEventListener('click', () => {
            const alertLevels = ['primary', 'info', 'success', 'warning', 'error'];
            const randomAlertLevel = alertLevels[Math.floor(Math.random() * alertLevels.length)];
            const notificationData = {
                subscriberId: "notiphy",  // loginToken
                locationId: "notiphy_demo", // locationCode
                notification: {
                    title: `${randomAlertLevel[0].toUpperCase()}${randomAlertLevel.slice(1)} Notification`,
                    text: `This notification is sent with an alertLevel of '${randomAlertLevel}'.`,
                    alertLevel: randomAlertLevel,
                    actionUrl: "/path/to/action",
                    ttl: 300
                }
            };
            sendNotification(notificationData);
        });

        document.getElementById('tryBlockerButton').addEventListener('click', () => {
            const notificationData = {
                subscriberId: "notiphy",
                locationId: "notiphy_demo",
                notification: {
                    title: "Blocker Notification!",
                    text: "This notification was sent with alertLevel: blocker. The User will be unable to continue until this notification is dismissed.",
                    alertLevel: "blocker",
                    actionUrl: "",
                    ttl: 300
                }
            };
            sendNotification(notificationData);
            
        });
    
        const sendNotification = async (notificationData) => {
            // demo key localhost only
            const notiphyApiKey = 'notiphy_jFWcFdia_Dj2KnBeftggxa95PuGhph5yw';
            await fetch(`https://app.notiphy.me/api/notifications`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': notiphyApiKey
                    },
                    body: JSON.stringify(notificationData)
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Notification sent successfully:', data);
                    })
                    .catch((error) => {
                    console.error('Error sending notification:', error);
                });
        }
    </script>

</body>

</html>
